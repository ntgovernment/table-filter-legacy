{"version":3,"file":"table-filter.js","mappings":"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","sources":["webpack://TableFilter/webpack/universalModuleDefinition","webpack://TableFilter/webpack/bootstrap","webpack://TableFilter/webpack/runtime/define property getters","webpack://TableFilter/webpack/runtime/hasOwnProperty shorthand","webpack://TableFilter/./src/table-filter.js","webpack://TableFilter/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TableFilter\"] = factory();\n\telse\n\t\troot[\"TableFilter\"] = factory();\n})(this, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\n * Table Filter Component\n * A simple table filtering component for legacy agency sites\n */\n\nclass TableFilter {\n  constructor(tableSelector, options = {}) {\n    this.table = document.querySelector(tableSelector);\n    this.options = {\n      searchInputClass: options.searchInputClass || \"table-filter-search\",\n      noResultsClass: options.noResultsClass || \"table-filter-no-results\",\n      ...options,\n    };\n\n    if (!this.table) {\n      console.warn(`Table not found: ${tableSelector}`);\n      return;\n    }\n\n    this.filterContainer = null;\n    this.searchInput = null;\n    this.columnFilters = [];\n    this.activeFilters = {\n      search: \"\",\n      columns: {},\n    };\n\n    this.init();\n  }\n\n  init() {\n    this.createFilterMarkup();\n    this.attachEventListeners();\n  }\n\n  createFilterMarkup() {\n    // Check if filter already exists\n    const existing = document.getElementById(\"ntgc-page-filters\");\n    if (existing) {\n      this.filterContainer = existing;\n      this.searchInput = document.getElementById(\"searchInput\");\n      return;\n    }\n\n    // Create the main filter container\n    const container = document.createElement(\"div\");\n    container.id = \"ntgc-page-filters\";\n    container.className = \"row mt-5 d-print-none\";\n\n    // Get data attributes\n    const filterDiv = document.querySelector(\"[data-table-filter]\");\n    const searchPlaceholder =\n      filterDiv?.getAttribute(\"data-search-placeholder\") || \"Search\";\n    const columnFiltersAttr =\n      filterDiv?.getAttribute(\"data-column-filters\") || \"\";\n\n    // Parse column filters\n    const columnFiltersArray = columnFiltersAttr\n      .split(\";\")\n      .map((f) => f.trim())\n      .filter((f) => f);\n\n    // Build the markup\n    container.innerHTML = `\n    <!-- Free text search filter -->\n    <div class=\"filter-option mb-1 col-lg-4\" id=\"text-question\">\n        <label for=\"searchInput\">Search</label>\n        <div class=\"input-group\">\n            <input type=\"text\" name=\"project_title\" id=\"searchInput\" class=\"form-control rounded-0\" placeholder=\"${searchPlaceholder}\" autocomplete=\"off\">\n            <span class=\"clear-input\" id=\"clearInput\" hidden=\"\"></span>\n        </div>\n    </div>\n\n    <!-- Filter dropdowns will be generated dynamically -->\n    <div id=\"filterControls\" class=\"d-flex flex-nowrap col-lg-8\" style=\"gap: 16px;\"></div>\n\n    <div class=\"mt-3 hidden\" id=\"applied-filters\">\n        <div class=\"filter-option\" id=\"active-filters\">\n            <strong>Applied filters:</strong>\n            <div class=\"d-inline-block pt-2\" id=\"filterPillsContainer\">\n                <span id=\"filterPills\"></span>\n                <a href=\"#\" id=\"clearAllFilters\">Clear all</a>\n            </div>\n        </div>\n    </div>\n    `;\n\n    // Insert before table\n    this.table.parentNode.insertBefore(container, this.table);\n\n    this.filterContainer = container;\n    this.searchInput = document.getElementById(\"searchInput\");\n\n    // Generate column filter dropdowns\n    this.generateColumnFilters(columnFiltersArray);\n  }\n\n  generateColumnFilters(columnNames) {\n    if (!columnNames.length) return;\n\n    const filterControls = document.getElementById(\"filterControls\");\n    const thead = this.table.querySelector(\"thead\");\n    if (!thead) return;\n\n    const headers = Array.from(thead.querySelectorAll(\"th\"));\n\n    columnNames.forEach((columnName, index) => {\n      // Find the column index by matching header text\n      const columnIndex = headers.findIndex(\n        (th) =>\n          th.textContent.trim().toLowerCase() === columnName.toLowerCase(),\n      );\n\n      if (columnIndex === -1) return;\n\n      // Extract unique values from this column\n      const values = this.getUniqueColumnValues(columnIndex);\n\n      // Create the select dropdown\n      const filterDiv = document.createElement(\"div\");\n      filterDiv.className = \"filter-option flex-fill\";\n      filterDiv.style.cssText = \"flex: 1 1 0; min-width: 0;\";\n\n      const selectId = `selectInput${index + 1}`;\n      const label =\n        columnName === \"Year of finding\" ? \"Year of issue\" : columnName;\n      const placeholder = `Select ${label.toLowerCase()}`;\n\n      filterDiv.innerHTML = `\n        <label for=\"${selectId}\" class=\"ntgc-form-input--label\">${label}</label>\n        <div>\n            <select name=\"select-input-${index + 1}\" id=\"${selectId}\" class=\"form-select rounded-0\">\n                <option value=\"all\" selected=\"\">${placeholder}</option>\n                ${values.map((val) => `<option value=\"${val.toLowerCase()}\">${val}</option>`).join(\"\")}\n            </select>\n        </div>\n      `;\n\n      filterControls.appendChild(filterDiv);\n\n      // Store column filter info\n      this.columnFilters.push({\n        columnIndex,\n        selectId,\n        columnName,\n      });\n    });\n  }\n\n  getUniqueColumnValues(columnIndex) {\n    const tbody = this.table.querySelector(\"tbody\");\n    const rows = tbody ? Array.from(tbody.querySelectorAll(\"tr\")) : [];\n    const values = new Set();\n\n    rows.forEach((row) => {\n      const cells = row.querySelectorAll(\"td\");\n      if (cells[columnIndex]) {\n        const text = cells[columnIndex].textContent.trim();\n        if (text) {\n          values.add(text);\n        }\n      }\n    });\n\n    // Sort values\n    return Array.from(values).sort((a, b) => {\n      // Try to sort numerically if both are numbers\n      const aNum = parseInt(a);\n      const bNum = parseInt(b);\n      if (!isNaN(aNum) && !isNaN(bNum)) {\n        return aNum - bNum;\n      }\n      return a.localeCompare(b);\n    });\n  }\n\n  attachEventListeners() {\n    // Search input\n    if (this.searchInput) {\n      this.searchInput.addEventListener(\"input\", (e) => {\n        this.activeFilters.search = e.target.value;\n        this.filterTable();\n        this.updateClearButton();\n        this.updateFilterPills();\n      });\n    }\n\n    // Clear input button\n    const clearInput = document.getElementById(\"clearInput\");\n    if (clearInput) {\n      clearInput.addEventListener(\"click\", () => {\n        this.searchInput.value = \"\";\n        this.activeFilters.search = \"\";\n        this.filterTable();\n        this.updateClearButton();\n        this.updateFilterPills();\n      });\n    }\n\n    // Column filter dropdowns\n    this.columnFilters.forEach((filter) => {\n      const select = document.getElementById(filter.selectId);\n      if (select) {\n        select.addEventListener(\"change\", (e) => {\n          const value = e.target.value;\n          if (value !== \"all\") {\n            // Initialize array if it doesn't exist\n            if (!this.activeFilters.columns[filter.columnIndex]) {\n              this.activeFilters.columns[filter.columnIndex] = [];\n            }\n            // Add value to array if not already present\n            if (\n              !this.activeFilters.columns[filter.columnIndex].includes(value)\n            ) {\n              this.activeFilters.columns[filter.columnIndex].push(value);\n            }\n            // Reset dropdown to \"all\" after adding filter\n            e.target.value = \"all\";\n            // Update dropdown options to hide selected values\n            this.updateDropdownOptions(filter.columnIndex);\n          }\n          this.filterTable();\n          this.updateFilterPills();\n        });\n      }\n    });\n\n    // Clear all filters\n    const clearAll = document.getElementById(\"clearAllFilters\");\n    if (clearAll) {\n      clearAll.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        this.clearAllFilters();\n      });\n    }\n  }\n\n  updateClearButton() {\n    const clearInput = document.getElementById(\"clearInput\");\n    if (clearInput) {\n      if (this.searchInput.value) {\n        clearInput.removeAttribute(\"hidden\");\n      } else {\n        clearInput.setAttribute(\"hidden\", \"\");\n      }\n    }\n  }\n\n  filterTable() {\n    const searchTerm = this.activeFilters.search.toLowerCase().trim();\n    const tbody = this.table.querySelector(\"tbody\");\n    const rows = tbody\n      ? tbody.querySelectorAll(\"tr\")\n      : this.table.querySelectorAll(\"tr\");\n    let visibleCount = 0;\n\n    rows.forEach((row, index) => {\n      // Skip header row if no tbody\n      if (!tbody && index === 0) {\n        return;\n      }\n\n      let isVisible = true;\n\n      // Check search term\n      if (searchTerm) {\n        const text = row.textContent.toLowerCase();\n        if (!text.includes(searchTerm)) {\n          isVisible = false;\n        }\n      }\n\n      // Check column filters\n      if (isVisible) {\n        for (const [columnIndex, filterValues] of Object.entries(\n          this.activeFilters.columns,\n        )) {\n          const cells = row.querySelectorAll(\"td\");\n          const cell = cells[columnIndex];\n          if (cell && filterValues.length > 0) {\n            const cellText = cell.textContent.trim().toLowerCase();\n            // OR logic: row must match at least ONE of the filter values for this column\n            if (!filterValues.includes(cellText)) {\n              isVisible = false;\n              break;\n            }\n          }\n        }\n      }\n\n      if (isVisible) {\n        row.style.display = \"\";\n        visibleCount++;\n      } else {\n        row.style.display = \"none\";\n      }\n    });\n\n    this.updateNoResultsMessage(visibleCount === 0);\n  }\n\n  updateFilterPills() {\n    const pillsContainer = document.getElementById(\"filterPills\");\n    const appliedFiltersSection = document.getElementById(\"applied-filters\");\n\n    if (!pillsContainer || !appliedFiltersSection) return;\n\n    const pills = [];\n\n    // Add search pill\n    if (this.activeFilters.search) {\n      pills.push(`\n        <button type=\"button\" class=\"filter-pill\" tabindex=\"0\" onclick=\"window.tableFilterInstance?.clearSearchFilter()\" aria-label=\"Remove filter: ${this.activeFilters.search}\">\n          <span class=\"filter-pill-label\">${this.activeFilters.search}</span>\n          <span class=\"filter-pill-close\" aria-hidden=\"true\">×</span>\n        </button>\n      `);\n    }\n\n    // Add column filter pills\n    for (const [columnIndex, filterValues] of Object.entries(\n      this.activeFilters.columns,\n    )) {\n      const filter = this.columnFilters.find(\n        (f) => f.columnIndex == columnIndex,\n      );\n      if (filter && Array.isArray(filterValues)) {\n        // Create a pill for each filter value (grouped by column)\n        filterValues.forEach((filterValue) => {\n          pills.push(`\n            <button type=\"button\" class=\"filter-pill\" tabindex=\"0\" onclick=\"window.tableFilterInstance?.clearColumnFilter(${columnIndex}, '${filterValue}')\" aria-label=\"Remove filter: ${filterValue}\">\n              <span class=\"filter-pill-label\">${filterValue}</span>\n              <span class=\"filter-pill-close\" aria-hidden=\"true\">×</span>\n            </button>\n          `);\n        });\n      }\n    }\n\n    if (pills.length > 0) {\n      pillsContainer.innerHTML = pills.join(\"\");\n      appliedFiltersSection.classList.remove(\"hidden\");\n    } else {\n      pillsContainer.innerHTML = \"\";\n      appliedFiltersSection.classList.add(\"hidden\");\n    }\n  }\n\n  clearSearchFilter() {\n    this.searchInput.value = \"\";\n    this.activeFilters.search = \"\";\n    this.filterTable();\n    this.updateClearButton();\n    this.updateFilterPills();\n  }\n\n  clearColumnFilter(columnIndex, filterValue = null) {\n    if (filterValue === null) {\n      // Clear all filters for this column\n      delete this.activeFilters.columns[columnIndex];\n    } else {\n      // Remove specific filter value from the array\n      const filters = this.activeFilters.columns[columnIndex];\n      if (filters) {\n        const index = filters.indexOf(filterValue);\n        if (index > -1) {\n          filters.splice(index, 1);\n        }\n        // If array is empty, delete the column entry\n        if (filters.length === 0) {\n          delete this.activeFilters.columns[columnIndex];\n        }\n      }\n    }\n\n    // Update dropdown options to show removed values\n    this.updateDropdownOptions(columnIndex);\n\n    this.filterTable();\n    this.updateFilterPills();\n  }\n\n  updateDropdownOptions(columnIndex) {\n    const filter = this.columnFilters.find((f) => f.columnIndex == columnIndex);\n    if (!filter) return;\n\n    const select = document.getElementById(filter.selectId);\n    if (!select) return;\n\n    const selectedValues = this.activeFilters.columns[columnIndex] || [];\n\n    // Show/hide options based on whether they're selected\n    Array.from(select.options).forEach((option) => {\n      if (option.value !== \"all\") {\n        if (selectedValues.includes(option.value)) {\n          option.style.display = \"none\";\n        } else {\n          option.style.display = \"\";\n        }\n      }\n    });\n  }\n\n  clearAllFilters() {\n    // Clear search\n    this.searchInput.value = \"\";\n    this.activeFilters.search = \"\";\n\n    // Clear column filters\n    this.activeFilters.columns = {};\n    this.columnFilters.forEach((filter) => {\n      const select = document.getElementById(filter.selectId);\n      if (select) {\n        select.value = \"all\";\n        // Show all options again\n        Array.from(select.options).forEach((option) => {\n          option.style.display = \"\";\n        });\n      }\n    });\n\n    this.filterTable();\n    this.updateClearButton();\n    this.updateFilterPills();\n  }\n\n  updateNoResultsMessage(show) {\n    let message = document.querySelector(`.${this.options.noResultsClass}`);\n\n    if (show && !message) {\n      message = document.createElement(\"div\");\n      message.className = this.options.noResultsClass;\n      message.textContent = \"No matching results found.\";\n      this.table.parentNode.insertBefore(message, this.table.nextSibling);\n    } else if (!show && message) {\n      message.remove();\n    }\n  }\n}\n\n// Auto-initialize on DOMContentLoaded if data-table-filter attribute is present\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const tables = document.querySelectorAll(\"[data-table-filter]\");\n  tables.forEach((table) => {\n    const tableId = table.getAttribute(\"data-table-id\");\n    const selector = tableId\n      ? `#${tableId}`\n      : table.id\n        ? `#${table.id}`\n        : table;\n    const instance = new TableFilter(selector);\n\n    // Store instance globally for pill close buttons\n    if (!window.tableFilterInstance) {\n      window.tableFilterInstance = instance;\n    }\n  });\n});\n\n// Export for use as module\nexport default TableFilter;\n\n// Also expose globally for legacy use\nif (typeof window !== \"undefined\") {\n  window.TableFilter = TableFilter;\n}\n","/**\n * Table Filter Component - Main Entry Point\n * Imports CSS and exports the TableFilter class\n */\n\nimport './table-filter.css';\nimport TableFilter from './table-filter.js';\n\nexport default TableFilter;\n"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","TableFilter","constructor","tableSelector","options","table","document","querySelector","searchInputClass","noResultsClass","filterContainer","searchInput","columnFilters","activeFilters","search","columns","init","console","warn","createFilterMarkup","attachEventListeners","existing","getElementById","container","createElement","id","className","filterDiv","searchPlaceholder","getAttribute","columnFiltersArray","split","map","f","trim","filter","innerHTML","parentNode","insertBefore","generateColumnFilters","columnNames","length","filterControls","thead","headers","Array","from","querySelectorAll","forEach","columnName","index","columnIndex","findIndex","th","textContent","toLowerCase","values","getUniqueColumnValues","style","cssText","selectId","label","placeholder","val","join","appendChild","push","tbody","rows","Set","row","cells","text","add","sort","a","b","aNum","parseInt","bNum","isNaN","localeCompare","addEventListener","e","target","value","filterTable","updateClearButton","updateFilterPills","clearInput","select","includes","updateDropdownOptions","clearAll","preventDefault","clearAllFilters","removeAttribute","setAttribute","searchTerm","visibleCount","isVisible","filterValues","entries","cell","cellText","display","updateNoResultsMessage","pillsContainer","appliedFiltersSection","pills","find","isArray","filterValue","classList","remove","clearSearchFilter","clearColumnFilter","filters","indexOf","splice","selectedValues","option","show","message","nextSibling","tableId","selector","instance","window","tableFilterInstance"],"ignoreList":[],"sourceRoot":""}